/* CSS Variables - only for values reused more than twice */
.prm-yt-gallery {
  --color-white: #fff;
  --transition-default: 0.2s ease-out;
  --control-width: 31.35px;
  --control-height: 22px;
  --card-offset: -55px;
}

/* ====================
   Base Layout
   ==================== */

.prm-yt-gallery {
  display: flex;
  justify-content: center;
  width: 100%;
}

.pre-yt-grid {
  display: grid;
  grid-template-columns: repeat(2, minmax(min-content, 143px));
  column-gap: 16px;
  row-gap: 15px;
  padding: 90px 20px 80px;
  max-width: calc((143px * 2) + 16px + 40px);
  margin: 0 auto;
}

/* ====================
   Card Structure
   ==================== */

.pre-yt-card {
  width: 100%;
  aspect-ratio: 1 / 1.76;
  position: relative;
  overflow: visible;
}

.pre-yt-card-inner {
  width: 100%;
  height: 100%;
  border-radius: 18px;
  overflow: hidden;
  position: absolute;
  top: 0;
  left: 0;
  background: #C5C2C2;
  transition: transform var(--transition-default);
  transform-origin: center center;
}

/* Mobile: Column 2 cards (2, 4, 6, 8, 10) offset */
.pre-yt-card:nth-child(2n) {
  transform: translateY(var(--card-offset));
}

/* ====================
   Card Content Wrappers
   ==================== */

.pre-yt-card-inner .image-wrapper {
  width: 100%;
  height: 100%;
  position: absolute;
  top: 0;
  left: 0;
}

.pre-yt-card-inner .image-wrapper picture,
.pre-yt-card-inner .image-wrapper img {
  width: 100%;
  height: 100%;
  object-fit: cover;
  display: block;
}

.pre-yt-card-inner .video-wrapper {
  width: 100%;
  height: 100%;
  position: absolute;
  top: 0;
  left: 0;
  opacity: 0;
}

.pre-yt-card-inner .video-wrapper video {
  width: 100%;
  height: 100%;
  object-fit: cover;
  display: block;
}

/* ====================
   Free Tag Badge
   ==================== */

.pre-yt-card .pre-yt-free-tag {
  display: flex;
  position: absolute;
  top: 16px;
  inset-inline-end: 0;
  background: var(--color-white);
  color: #2C2C2C;
  box-sizing: border-box;
  font-weight: 400;
  line-height: 1.5em;
  height: 13.58px;
  font-size: 7.23px;
  padding: 1.03px 5.17px 1.55px;
  border-start-start-radius: 2.07px;
  border-end-start-radius: 2.07px;
  z-index: 4;
}

/* ====================
   Interactive Elements - Buttons
   ==================== */

.pre-yt-card-inner .pre-yt-button {
  position: absolute;
  bottom: 40px;
  left: 50%;
  transform: translateX(-50%);
  padding: 8px 14px;
  border-radius: 16px;
  border: 2px solid var(--color-white);
  background: var(--color-white);
  color: #2C2C2C;
  font-size: 12px;
  font-weight: 700;
  text-decoration: none;
  white-space: nowrap;
  line-height: 15px;
  z-index: 2;
  max-width: calc(100% - 50px);
  overflow: hidden;
  text-overflow: ellipsis;
  opacity: 0;
  transition: opacity var(--transition-default);
}

.pre-yt-card.expanded.info-visible .pre-yt-card-inner .pre-yt-button {
  bottom: 19px;
}

.pre-yt-card-inner .pre-yt-info-button {
  position: absolute;
  inset-inline-start: 13.9px;
  top: 11.227px;
  width: var(--control-width);
  height: var(--control-height);
  padding: 0;
  border: none;
  background: #f3f3f3;
  border-radius: 11px;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 2;
  opacity: 0;
  transition: opacity var(--transition-default);
}

.pre-yt-card-inner .pre-yt-close-card-button {
  position: absolute;
  top: 12px;
  inset-inline-end: 12px;
  width: var(--control-width);
  height: var(--control-height);
  padding: 0;
  border: none;
  background: #f3f3f3;
  border-radius: 11px;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 4;
}

/* ====================
   Info Overlay
   ==================== */

.pre-yt-card-inner .pre-yt-info-overlay {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: rgba(0, 0, 0, 0.85);
  opacity: 0;
  pointer-events: none;
  transition: opacity var(--transition-default);
  display: flex;
  flex-direction: column;
  padding: 45px 26px;
  box-sizing: border-box;
  z-index: 3;
}

.pre-yt-card-inner .pre-yt-overlay-close {
  position: absolute;
  top: 12px;
  inset-inline-end: 12px;
  width: var(--control-width);
  height: var(--control-height);
  padding: 0;
  border: none;
  background: transparent;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 4;
}

.pre-yt-card-inner .pre-yt-overlay-text {
  flex: 1;
  color: var(--color-white);
  font-size: 18px;
  line-height: 1.5;
  margin: 0;
  overflow-y: auto;
  word-wrap: break-word;
  margin-bottom: 19px;
  /* Modern scrollbar styling */
  scrollbar-width: thin;
  scrollbar-color: rgba(0, 0, 0, 0.5) transparent;
}

/* Webkit scrollbar styling for Chrome, Safari, Edge */
.pre-yt-card-inner .pre-yt-overlay-text::-webkit-scrollbar {
  width: 6px;
}

.pre-yt-card-inner .pre-yt-overlay-text::-webkit-scrollbar-track {
  background: transparent;
}

.pre-yt-card-inner .pre-yt-overlay-text::-webkit-scrollbar-thumb {
  background-color: rgba(0, 0, 0, 0.5);
  border-radius: 3px;
}

.pre-yt-card-inner .pre-yt-overlay-text::-webkit-scrollbar-thumb:hover {
  background-color: rgba(0, 0, 0, 0.7);
}

/* ====================
   Card States - Expanded
   ==================== */

.pre-yt-card.expanded {
  z-index: 1;
}

.pre-yt-card.expanded .pre-yt-card-inner {
  transform: scale(1.161);
  border: 2px solid var(--color-white);
}

.pre-yt-card.expanded .image-wrapper {
  opacity: 0;
}

.pre-yt-card.expanded .video-wrapper {
  opacity: 1;
}

.pre-yt-card.expanded .pre-yt-button,
.pre-yt-card.expanded .pre-yt-info-button {
  opacity: 1;
}

.pre-yt-card.expanded .pre-yt-free-tag {
  display: none;
}

/* ====================
   Card States - Info Visible
   ==================== */

.pre-yt-card.info-visible .pre-yt-info-overlay {
  opacity: 1;
  pointer-events: auto;
}

.pre-yt-card.info-visible .pre-yt-info-button,
.pre-yt-card.info-visible .pre-yt-close-card-button {
  opacity: 0;
  pointer-events: none;
}

.pre-yt-card.info-visible .pre-yt-button {
  z-index: 4;
}

/* ====================
   Loading State - Shimmer Effect
   ==================== */

.pre-yt-card.shimmer .pre-yt-card-inner .image-wrapper {
  background-color: #e0e0e0;
  background-image: linear-gradient(
    90deg,
    #e0e0e0 0%,
    #e0e0e0 25%,
    #f0f0f0 50%,
    #e0e0e0 75%,
    #e0e0e0 100%
  );
  background-size: 200% 100%;
  animation: shimmer 1.5s infinite;
}

.pre-yt-card.shimmer .pre-yt-card-inner .image-wrapper img {
  opacity: 0;
}

@keyframes shimmer {
  0% {
    background-position: 200% 0;
  }

  100% {
    background-position: -200% 0;
  }
}

/* ====================
   Responsive - Tablet (600px - 1199px)
   ==================== */

@media (min-width: 600px) {
  .pre-yt-grid {
    grid-template-columns: repeat(3, minmax(min-content, 203px));
    max-width: calc((203px * 3) + (16px * 2) + 40px);
    padding: 90px 20px 80px;
  }

  /* Reset mobile offset */
  .pre-yt-card:nth-child(2n) {
    transform: none;
  }

  /* Tablet: Column 2 cards (2, 5, 8) offset */
  .pre-yt-card:nth-child(3n+2) {
    transform: translateY(var(--card-offset));
  }

  /* Card state adjustments */
  .pre-yt-card.expanded .pre-yt-card-inner {
    transform: scale(1.158);
  }

  /* Button adjustments */
  .pre-yt-card-inner .pre-yt-button {
    font-size: 17px;
    padding: 6px 21px;
    border-radius: 23px;
    line-height: 22.164px;
    max-width: calc(100% - 60px);
  }

  /* Free tag adjustments */
  .pre-yt-card .pre-yt-free-tag {
    height: 19.69px;
    font-size: 10.34px;
    padding: 1.48px 7.38px 2.22px;
    border-start-start-radius: 2.95px;
    border-end-start-radius: 2.95px;
  }

  /* Control button positioning */
  .pre-yt-card-inner .pre-yt-info-button {
    inset-inline-end: 13.9px;
    inset-inline-start: unset;
  }

  .pre-yt-card-inner .pre-yt-close-card-button {
    display: none;
  }
}

/* ====================
   Responsive - Desktop (1200px and above)
   ==================== */

@media (min-width: 1200px) {
  .pre-yt-grid {
    grid-template-columns: repeat(5, minmax(min-content, 275px));
    max-width: calc((275px * 5) + (16px * 4) + 40px);
    padding: 90px 80px 80px;
  }

  /* Reset tablet offset */
  .pre-yt-card:nth-child(3n+2) {
    transform: none;
  }

  /* Desktop: Columns 2 and 4 offset (2, 4, 7, 9, 12, 14...) */
  .pre-yt-card:nth-child(5n+2),
  .pre-yt-card:nth-child(5n+4) {
    transform: translateY(var(--card-offset));
  }

  /* Card state adjustments */
  .pre-yt-card.expanded .pre-yt-card-inner {
    transform: scale(1.116);
  }

  /* Hide mobile/tablet buttons - including expanded state */
  .pre-yt-card-inner .pre-yt-button,
  .pre-yt-card.expanded .pre-yt-button,
  .pre-yt-card-inner .pre-yt-close-card-button {
    display: none;
  }

  /* Free tag adjustments */
  .pre-yt-card .pre-yt-free-tag {
    height: 26px;
    font-size: 14px;
    padding: 2px 10px 3px;
    border-start-start-radius: 4px;
    border-end-start-radius: 4px;
  }
}
